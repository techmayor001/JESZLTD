<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Agreement - Club De Stars Cooperative</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none; }
            body { background: white; }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
        
        .signature-pad {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            cursor: crosshair;
            touch-action: none;
            height: 200px;
        }
        
        @media (max-width: 640px) {
            .signature-pad {
                height: 250px;
            }
        }
        
        .success-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .success-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
        <style>
        :root {
            --primary: #1e3a8a;
            --primary-dark: #1e40af;
            --primary-light: #3b82f6;
            --secondary: #64748b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #06b6d4;
            --sidebar-width: 280px;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: var(--sidebar-width);
            background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
            color: white;
            z-index: 1040;
            transition: all 0.3s;
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(30, 58, 138, 0.15);
        }
        
        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        
        .logo-box {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary);
            font-size: 1.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .sidebar-menu {
            padding: 1rem 0;
        }
        
        .sidebar-menu a {
            color: rgba(255,255,255,0.85);
            text-decoration: none;
            padding: 0.875rem 1.5rem;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            font-weight: 500;
        }
        
        .sidebar-menu a:hover {
            background: rgba(255,255,255,0.1);
            color: white;
            border-left-color: white;
        }
        
        .sidebar-menu a.active {
            background: rgba(255,255,255,0.15);
            color: white;
            border-left-color: white;
        }
        
        .sidebar-menu a i {
            width: 24px;
            margin-right: 12px;
            font-size: 1.1rem;
        }
        
        /* Top Navbar */
        .top-navbar {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: 75px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.08);
            z-index: 1030;
            display: flex;
            align-items: center;
            padding: 0 2rem;
            transition: all 0.3s;
            border-bottom: 1px solid rgba(30, 58, 138, 0.1);
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: 75px;
            padding: 2rem;
            min-height: calc(100vh - 75px);
            transition: all 0.3s;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-card {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
            color: white;
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 15px 40px rgba(30, 58, 138, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: rgba(255,255,255,0.05);
            border-radius: 50%;
        }
        
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 1.75rem;
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            height: 100%;
            border: 1px solid rgba(30, 58, 138, 0.05);
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(30, 58, 138, 0.15);
        }
        
        .stat-icon {
            width: 65px;
            height: 65px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }
        
        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.08);
            background: white;
            border: 1px solid rgba(30, 58, 138, 0.05);
        }
        
        .card-header {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%);
            border-bottom: 2px solid rgba(30, 58, 138, 0.1);
            padding: 1.5rem;
            border-radius: 20px 20px 0 0 !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border: none;
            padding: 0.7rem 1.75rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.3);
        }
        
        .btn-outline-primary {
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 12px;
            padding: 0.7rem 1.75rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-outline-primary:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }
        
        .member-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.3);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .club-member-badge {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .non-club-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .quick-action {
            text-align: center;
            padding: 1.75rem;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%);
            border: 2px solid rgba(30, 58, 138, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        .quick-action:hover {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(30, 58, 138, 0.25);
            border-color: transparent;
        }
        
        .quick-action i {
            font-size: 2.2rem;
            margin-bottom: 0.75rem;
            display: block;
        }
        
        .loan-info-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 20px;
            padding: 1.75rem;
            margin-bottom: 1.25rem;
        }
        
        .savings-goal-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 20px;
            padding: 1.75rem;
        }
        
        .alert-warning-custom {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 1.25rem;
            color: #92400e;
        }
        
        .alert-info-custom {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
            border-radius: 16px;
            padding: 1.25rem;
            color: #1e40af;
        }
        
        .powered-by {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 12px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.15);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary);
            z-index: 1000;
        }
        
        .loan-rules-list {
            background: rgba(30, 58, 138, 0.02);
            padding: 1.5rem;
            border-radius: 16px;
            border: 2px solid rgba(30, 58, 138, 0.1);
        }
        
        .loan-rules-list li {
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(30, 58, 138, 0.1);
        }
        
        .loan-rules-list li:last-child {
            border-bottom: none;
        }
        
        .print-button {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.6rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .print-button:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        
        @media (max-width: 992px) {
            .sidebar {
                left: calc(-1 * var(--sidebar-width));
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .top-navbar {
                left: 0;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .powered-by {
                bottom: 10px;
                right: 10px;
                font-size: 0.75rem;
                padding: 8px 12px;
            }
        }

        @media print {
            .sidebar, .top-navbar, .btn, .quick-action, .powered-by {
                display: none !important;
            }
            
            .main-content {
                margin: 0;
                padding: 0;
            }
            
            .card {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <div class="logo-box">

                    <img src="/media/assets/logo/log.png" alt="" width="100%" height="100%">
                </div>
                <div>
                    <h5 class="mb-0 fw-bold" style="text-transform: uppercase;">Club De Stars</h5>
                    <small class="opacity-75">COOPERATIVE SOCIETY LIMITED</small>
                </div>
            </div>
            <div class="member-badge mt-2 <%= user.membershipID.startsWith('CD') ? 'club-member-badge' : 'non-club-member-badge' %>">
                <i class="fas <%= user.membershipID.startsWith('CD') ? 'fa-star' : 'fa-user' %>"></i>
                <span><%= user.membershipID.startsWith('CD') ? 'Club Member' : 'Non-Club Member' %></span>
            </div>

        </div>
        <div class="sidebar-menu">
            <a href="/club-de-star-cooperative/dashboard">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="/club-de-star-cooperative/transaction">
                <i class="fas fa-exchange-alt"></i> Transactions
            </a>
            <!-- <a href="#" onclick="showSection('savings', event)">
                <i class="fas fa-piggy-bank"></i> My Savings
            </a> -->
            <a href="/club-de-star-cooperative/loan">
                <i class="fas fa-hand-holding-usd"></i> My Loans
            </a>
            <a href="/club-de-star-cooperative/guarantorRequest">
                <i class="fas fa-user-friends"></i> Guarantor Requests
                <% 
                const pendingCount = user.guarantorRequests
                    ? user.guarantorRequests.filter(r => r.status === "pending").length
                    : 0; 
                %>
                <% if (pendingCount > 0) { %>
                    <span class="badge bg-danger ms-2"><%= pendingCount %></span>
                <% } %>
            </a>

            <a href="/club-de-star-cooperative/roiCalculator">
                <i class="fas fa-chart-line"></i> ROI Calculator
            </a>
            <a href="/club-de-star-cooperative/profile">
                <i class="fas fa-user-circle"></i> My Profile
            </a>
            <a href="/club-de-star-cooperative/referral">
                <i class="fas fa-users"></i> Referral Program
            </a>
            <a href="/club-de-star-cooperative/memberContract" class="active">
                <i class="fas fa-file-contract"></i> Terms & Conditions
            </a>

            <a href="/logout" class="mt-3" style="color: rgba(255,255,255,0.6);">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </div>

    <!-- Top Navbar -->
    <div class="top-navbar">
        <i class="fas fa-bars d-lg-none me-3"
        style="cursor: pointer; color: var(--primary); font-size: 1.5rem;"
        onclick="document.getElementById('sidebar').classList.toggle('active')"></i>

        <!-- This will only show on lg and above -->
        <div class="flex-grow-1 d-none d-lg-block">
            <h5 class="mb-0 fw-bold" style="color: var(--primary)">Welcome back, <%= user.firstName %>! ðŸ‘‹</h5>
            <small class="text-muted">
                Member ID: <%= user.membershipID %> | <%= new Date(user.createdAt).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %>
            </small>
        </div>
    </div>


    <!-- Main Content -->
    <main class="main-content">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden fade-in">
            <!-- Document Header -->
            <div class="gradient-bg text-white p-6 sm:p-8">
                <h2 class="text-2xl sm:text-3xl font-bold mb-2 text-center">MEMORANDUM OF UNDERSTANDING</h2>
                <p class="text-blue-50 text-center text-sm sm:text-base">Membership Agreement & Bylaws</p>
            </div>

            <!-- Document Body -->
            <div class="p-6 sm:p-8 lg:p-12">
                <!-- Parties Section -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">BETWEEN</h3>
                    
                    <div class="space-y-4 text-sm sm:text-base">
                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-900">
                            <p class="font-semibold text-gray-900 mb-2">CLUB DE STARS MULTIPURPOSE COOPERATIVE SOCIETY LIMITED</p>
                            <p class="text-gray-700">A duly registered cooperative under the laws of the Federal Republic of Nigeria, with registration number <span class="font-semibold">BN/CRCS/14864</span>, and having its registered office at Makurdi, Benue State (hereinafter referred to as <strong>"The Cooperative"</strong>).</p>
                        </div>

                        <div class="text-center py-2">
                            <span class="text-gray-600 font-semibold">AND</span>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-600">
                            <p class="font-semibold text-gray-900 mb-2" ><%= user.firstName %> <%= user.lastName %></p>
                            <p class="text-gray-700">A member of the Cooperative, residing at <span class="font-medium"><%= user.address %>, <%= user.lga %>, <%= user.state %> State, Nigeria</span>, with membership number <span class="font-semibold"><%= user.membershipID %></span> (hereinafter referred to as <strong>"The Member"</strong>).</p>
                        </div>
                    </div>
                </div>

                <!-- Purpose -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">1</span>
                        Purpose of the MOU
                    </h3>
                    <p class="text-gray-700 ml-11 text-sm sm:text-base">
                        This Memorandum of Understanding (MOU) outlines the terms and conditions of the relationship between the Cooperative and the Member regarding their rights, responsibilities, and obligations. These Terms and Conditions govern the relationship between members and Club De Stars Multi-Purpose Cooperative Society Ltd. Members agree to abide by these terms, which are designed to promote mutual cooperation and benefits.
                    </p>
                </section>

                <!-- Membership Obligations -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">2</span>
                        Membership Obligations
                    </h3>
                    <div class="ml-11 text-sm sm:text-base">
                        <p class="text-gray-700 mb-3">Membership is open to individuals who meet the criteria set forth by the cooperative, as determined by the Board of Directors.</p>
                        <p class="text-gray-700 mb-3 font-medium">The Member agrees to:</p>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex">
                                <span class="font-semibold mr-2">a)</span>
                                <span>Adhere to the Cooperative's bylaws, policies, and regulations, pay annual dues, and contribute to the cooperative's objectives through active participation.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">b)</span>
                                <span>Participate in Cooperative activities, meetings, and decision-making processes.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">c)</span>
                                <span>Contribute financially as per the Cooperative's share capital and savings requirements.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">d)</span>
                                <span>Uphold the values and principles of cooperation, mutual support, and good faith.</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Rights and Benefits -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">3</span>
                        Rights and Benefits of the Member
                    </h3>
                    <div class="ml-11 text-sm sm:text-base">
                        <p class="text-gray-700 mb-3 font-medium">The Member is entitled to:</p>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex">
                                <span class="font-semibold mr-2">a)</span>
                                <span>Participate in profit-sharing or dividends as per the Cooperative's policies.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">b)</span>
                                <span>Vote and be elected to the Cooperative's leadership positions (if eligible).</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">c)</span>
                                <span>Access loans, credit facilities, and other services provided by the Cooperative.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">d)</span>
                                <span>Receive training, education, and support from the Cooperative.</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Financial Contributions -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">4</span>
                        Financial Contributions
                    </h3>
                    <div class="ml-11 text-sm sm:text-base">
                        <p class="text-gray-700 mb-3 font-medium">The Member shall contribute:</p>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex">
                                <span class="font-semibold mr-2">a)</span>
                                <span>A membership fee of <strong>â‚¦2,000</strong> upon joining.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">b)</span>
                                <span>A minimum share capital contribution of <strong>â‚¦1,000</strong> as per Cooperative policy.</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Termination -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">5</span>
                        Termination of Membership
                    </h3>
                    <div class="ml-11 text-sm sm:text-base">
                        <p class="text-gray-700 mb-3 font-medium">Membership may be terminated by:</p>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex">
                                <span class="font-semibold mr-2">a)</span>
                                <span>Voluntary withdrawal, provided the Member gives 30 days' notice.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">b)</span>
                                <span>Failure to fulfill financial obligations or breach of Cooperative policies.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">c)</span>
                                <span>Expulsion by the Board due to misconduct, fraud, or violation of Cooperative principles.</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Dispute Resolution -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">6</span>
                        Dispute Resolution
                    </h3>
                    <p class="text-gray-700 ml-11 text-sm sm:text-base">
                        Any dispute arising from this MOU shall first be resolved through dialogue and mediation within the Cooperative. If unresolved, the matter shall be referred to arbitration as per applicable law/Cooperative Act.
                    </p>
                </section>

                <!-- Duration -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">7</span>
                        Duration and Review
                    </h3>
                    <p class="text-gray-700 ml-11 text-sm sm:text-base">
                        This MOU shall remain in effect for the duration of the Member's active participation in the Cooperative and may be reviewed periodically.
                    </p>
                </section>

                <!-- Miscellaneous -->
                <section class="mb-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">8</span>
                        Miscellaneous Provisions
                    </h3>
                    <div class="ml-11 text-sm sm:text-base">
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex">
                                <span class="font-semibold mr-2">a)</span>
                                <span>This MOU does not create an employer-employee relationship between the parties.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">b)</span>
                                <span>Amendments to this MOU shall be made in writing and agreed upon by both parties.</span>
                            </li>
                            <li class="flex">
                                <span class="font-semibold mr-2">c)</span>
                                <span>The cooperative will hold meetings when need arises to discuss operations, financial performance, and future initiatives. Members will receive prior notice of all meetings.</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Signatures Section -->
             <section class="mt-12">
    <h3 class="text-lg font-bold text-gray-900 mb-6 flex items-center">
        <span class="bg-blue-900 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">9</span>
        Signatures
    </h3>

    <div>
        <p class="text-gray-700 mb-8 text-sm sm:text-base">
            By signing below, all parties acknowledge that they have read, understood, and agreed to the terms outlined in this document.
        </p>

        <!-- Cooperative + Operating Company Signatures -->
        <div class="grid sm:grid-cols-2 gap-8 mb-8">

            <!-- Cooperative Signature -->
            <div class="border-t-2 border-gray-300 pt-4">
                <p class="font-semibold text-gray-900">For the Cooperative:</p>
                <p class="text-sm text-gray-700 mt-2">Name: <span class="font-medium">Adi Stanilus Duniya</span></p>
                <p class="text-sm text-gray-700">Position: <span class="font-medium">Director</span></p>
                <p class="text-sm text-gray-700">Date: <span class="font-medium">16/03/2025</span></p>

                <!-- Optional: Cooperative Signature Image -->
                <div class="mt-3">
                    <img src="/images/staff-signatures/cooperative-sign.png" alt="Cooperative Signature" class="h-16 object-contain opacity-90">
                </div>
            </div>

            <!-- Operating Company Signature -->
            <div class="border-t-2 border-gray-300 pt-4">
                <p class="font-semibold text-gray-900">For the Operating Company:</p>
                <p class="text-sm text-gray-700 mt-2">Name: <span class="font-medium">Eraer Paul Kulugh</span></p>
                <p class="text-sm text-gray-700">Position: <span class="font-medium">Manager</span></p>
                <p class="text-sm text-gray-700">Date: <span class="font-medium">16/03/2025</span></p>

                <!-- Optional: Operating Company Signature Image -->
                <div class="mt-3">
                    <img src="/images/staff-signatures/operating-sign.png" alt="Operating Company Signature" class="h-16 object-contain opacity-90">
                </div>
            </div>

        </div>

        <!-- Member Signature Block -->
        <div class="border-2 border-blue-200 rounded-lg p-6 bg-blue-50">
            <p class="font-semibold text-gray-900 mb-4">For the Member:</p>

            <!-- Signature Image -->
            <div class="mb-4">
                <% if (user.signature) { %>
                    <img 
                        src="<%= user.signature.replace('public\\', '/').replace(/\\/g, '/') %>" 
                        alt="Member Signature" 
                        class="h-20 object-contain mx-auto"
                        style="max-width: 250px;"
                    >
                <% } else { %>
                    <div class="h-20 flex items-center justify-center text-gray-500 italic">
                        No signature uploaded yet
                    </div>
                <% } %>
            </div>


            <!-- Member Details -->
            <div class="space-y-2 text-sm text-gray-700">
                <p>Name: 
                    <span class="font-semibold">
                        <%= user.firstName %> <%= user.lastName %>
                    </span>
                </p>

                <p>Membership No.: 
                    <span class="font-semibold">
                        <%= user.membershipID %>
                    </span>
                </p>

                <p>Date: 
                    <span class="font-semibold">
                        <%= new Date().toLocaleDateString("en-US", { 
                            weekday: "long", 
                            year: "numeric", 
                            month: "long", 
                            day: "numeric" 
                        }) %>
                    </span>
                </p>
            </div>
        </div>
    </div>
</section>


                <!-- Action Buttons -->
                <div class="mt-8 flex flex-col sm:flex-row gap-4 no-print">
                    <button onclick="window.print()" class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        Print Document
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Initialize signature pad
        const canvas = document.getElementById('signaturePad');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let hasSignature = false;

        // Resize canvas for better quality on mobile
        function resizeCanvas() {
            const ratio = Math.max(window.devicePixelRatio || 1, 1);
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * ratio;
            canvas.height = rect.height * ratio;
            ctx.scale(ratio, ratio);
            
            // Set canvas background to white
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Call resize on load and window resize
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Drawing functions
        function getCoordinates(e) {
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;
            return { x, y };
        }

        function startDrawing(e) {
            isDrawing = true;
            const coords = getCoordinates(e);
            ctx.beginPath();
            ctx.moveTo(coords.x, coords.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            hasSignature = true;
            const coords = getCoordinates(e);
            ctx.lineTo(coords.x, coords.y);
            ctx.strokeStyle = '#1e40af';
            ctx.lineWidth = 2.5;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // Touch events
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        function clearSignature() {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            hasSignature = false;
            
            // Redraw after clearing
            const rect = canvas.getBoundingClientRect();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Populate member data from URL parameters or storage
        function populateMemberData() {
            const urlParams = new URLSearchParams(window.location.search);
            
            const memberData = {
                firstName: urlParams.get('firstName') || 'John',
                lastName: urlParams.get('lastName') || 'Doe',
                address: urlParams.get('address') || 'Sample Address, Lagos, Nigeria',
                membershipNumber: urlParams.get('membershipNumber') || 'NCD0000',
                email: urlParams.get('email') || 'member@example.com'
            };

            const fullName = `${memberData.firstName} ${memberData.lastName}`.toUpperCase();
            const currentDate = new Date().toLocaleDateString('en-GB');

            document.getElementById('memberName').textContent = fullName;
            document.getElementById('memberAddress').textContent = memberData.address;
            document.getElementById('membershipNumber').textContent = memberData.membershipNumber;
            document.getElementById('signatureName').textContent = fullName;
            document.getElementById('signatureMembershipNo').textContent = memberData.membershipNumber;
            document.getElementById('signatureDate').textContent = currentDate;
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            document.getElementById('errorText').textContent = message;
            errorDiv.classList.remove('hidden');
            errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            setTimeout(() => errorDiv.classList.add('hidden'), 5000);
        }

        function submitAgreement() {
            // Validate checkbox
            if (!document.getElementById('agreeTerms').checked) {
                showError('Please check the agreement box to proceed.');
                return;
            }

            // Validate signature
            if (!hasSignature) {
                showError('Please provide your digital signature before submitting.');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing...';

            // Get signature data
            const signatureData = canvas.toDataURL('image/png');

            // Simulate API call
            setTimeout(() => {
                // In a real implementation, send this data to your backend
                console.log('Agreement submitted with signature:', signatureData);
                
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Accept & Submit Agreement';
                
                // Show success modal
                document.getElementById('successModal').classList.add('active');
            }, 2000);
        }

        function redirectToDashboard() {
            // Redirect to member dashboard or home page
            window.location.href = '/dashboard';
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', populateMemberData);
    </script>
</body>
</html>